<ion-view title="Outings">
  <ion-side-menus>
    <ion-side-menu-content>
      <ion-content class="padding" has-header='true'>
        <button ng-click='toggleLeft()' class='button button-energized button-full'>Create Outing</button>
        
          <ion-list option-buttons="outingButtons">
              <ion-item ng-repeat="outing in outings | orderBy:outing.date" item="outing" can-swipe="true">
                  <img class='outingsThumbnail' src='{{getMoviePoster(outing.movie)}}'/>
                  <div class='outingDetails'>
                    <span class='outingDetail'> MOVIE TITLE: {{outing.movie}}</span>
                    <span class='outingDetail'> DATE: {{outing.date | date: 'EEE. MMM. d' }}</span>
                    <span class='outingDetail'> THEATER: {{outing.theater}} </span>
                    <span class='outingDetail'>
                    ATTENDEES:
                    <span ng-repeat="(attendeeId, attendee) in outing.attendees">{{attendee.name}} </span>
                    </span>
                    <span class="outingDetail">SHOWTIME: {{ outing.showtime }}</span>

                  </div>
                  <button class='button button-energized fandangoBuyOuting' ng-click="goTo(outing.movie, outing.showtime)">Buy A Ticket</button>
              </ion-item>
            </ion-list>
      </ion-content>
    </ion-side-menu-content>
    <ion-side-menu side='left'>
      <ion-content>
        <ion-header-bar class='bar-energized'>
          <h1 class='title'>New Outing</h1>
        </ion-header-bar>
        <br><br>
        <form class="outingsForm" ng-submit='processOutingForm()' name='outingForm'>
          <label class='item'>
            <select ng-model='form.movie' ng-options="movie.title for (movieTitle, movie) in allMovies" type='text' class='selectMovie' placeholder='Movie' ng-change='getTheaters(form.movie)'>
              <option value="" disabled selected>Select A Movie</option>
            </select>
          </label>
          <label class='item item-input' ng-show='dateFieldDisplay()' >
            <input ng-model='form.date' type='date' ng-change='showTheaters()'>
          </label>
          <label class='item item-input' ng-show='theaterField()'>
            <select ng-model="form.theater" name="theater" type="text" placeholder="Theater" class="outingField" ng-options="theater.theatre.name for (name, theater) in theaters" ng-change='getShowtimes(form.movie, form.theater)' >
              <option value="" disabled selected>Select A Theater</option>
            </select>
          </label>
          <label class='item item-input' ng-show="showtimeField()">
            <select ng-model="form.showtime" name="theater" type="text" placeholder="Theater" class="outingField" ng-options="showtime for (showtime, showtime) in showtimes" >
              <option value="" disabled selected>Select A Showtime</option>
            </select>
          </label>
          <button type='submit' class='button button-full button-positive'>Submit</button>
        </form>
      </ion-content>
    </ion-side-menu>
  </ion-side-menus>
  
</ion-view>
